# Review by Claudesdk

**Model**: claude-haiku-4-5-20251001
**Timestamp**: 2025-11-04T10:21:08.344260

## Feedback

두 버전의 MVP-REQUIREMENTS.md 문서를 검토하겠습니다.

## 검토 결과

### 정확성

**치명적 오류:**

1. **금액 단위 혼동 (문서 1)**
   - 가격을 "575 페소"라고 명시하면서 "DB 저장: 57500 센타보"라고 설명
   - 그러나 필리핀 페소의 경우 1 peso = 100 centavos이므로, 575 페소는 57,500 센타보가 맞음
   - **문제점**: 문서 내에서 "575원"이라는 표현과 "575 페소"가 혼용됨. 문서 2에서는 "575원"으로 표기되어 있어 통화 단위가 불명확함
   - 실제로 한국 제품(조선미녀 맑은쌀 선크림)을 필리핀 페소로 판매하는 것이 맥락상 맞는지 의문

2. **SQLite의 `updated_at` 자동 갱신 오해 (문서 1)**
   - 문서 1은 `execute_update` 헬퍼 함수로 `updated_at`을 명시적으로 갱신한다고 설명
   - 그러나 스키마에는 여전히 `updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP`만 있고, `ON UPDATE CURRENT_TIMESTAMP` 같은 트리거가 없음
   - 헬퍼 함수 방식은 올바른 접근이나, 이것이 "자동 갱신"은 아님 (개발자가 헬퍼를 사용해야 함)

3. **재고 차감 시점의 모순 (문서 2)**
   - "재고 차감 시점: 주문 생성 시 (결제 전)"
   - **문제**: 결제 실패 시 재고가 이미 차감되어 있어, 고객이 결제를 시도만 하고 실패해도 재고가 줄어드는 심각한 문제 발생
   - 문서 1에서 이를 "치명적 문제"로 지적하고 수정한 것은 적절함

4. **환불 시 재고 복구 로직 (문서 2)**
   - "환불 시 재고 자동 복구"라고만 명시
   - **문제**: 배송 완료(`DELIVERED`) 후 환불 시, 물품이 실제로 반송되지 않았는데 재고가 복구되면 재고 부풀리기 발생
   - 문서 1에서 배송 상태별 조건부 복구로 수정한 것은 적절함

**논리적 일관성 문제:**

5. **상태 관리 복잡도 (문서 2)**
   - `payment_status`와 `order_status`를 별도로 관리하면서 값이 중복됨 (`PENDING`, `COMPLETED`)
   - 문서 1에서 단일 `order_status`로 통합한 것이 더 명확하고 일관성 있음

### 적절성

**긍정적 개선사항 (문서 1):**
- 단계적 구현 전략 (1-b → 1-a → 2 → 3)은 학습 목적에 매우 적절
- Outside-In TDD 시작점이 명확함 (조회 → 생성 순서)
- 에러 처리 정책과 HTTP 상태 코드 가이드가 구체적
- PayPal 타임아웃 처리 전략 (`VERIFICATION_PENDING` + 백그라운드 재시도)이 현실적
- 입력 검증 규칙이 명시적
- 관리자 API 인증 추가로 보안 강화

**완전성 문제:**

1. **통화 및 가격 정책 불명확**
   - 실제 판매 통화가 KRW인지 PHP인지 불명확
   - 한국 제품을 필리핀에서 판매하는 것인지, 단순 예시인지 맥락 부족
   - 센타보 단위 사용 이유에 대한 설명 부족 (부동소수점 오류 방지 목적으로 추정되나 명시 필요)

2. **환불 시 배송비 처리 누락**
   - 환불 금액이 전액인지, 배송비 차감 여부 등에 대한 정책 없음
   - `refund_amount` 필드만 있고 계산 로직 설명 없음

3. **동시성 제어 구체성 부족**
   - "트랜잭션 처리로 재고 꼬임 방지"라고만 명시
   - SQLite의 동시 쓰기 제한, 락 타임아웃 정책 등 구체적 전략 없음

4. **관리자 인증 보안 수준 (문서 1)**
   - API 키 방식은 최소한의 보안만 제공
   - HTTPS 사용 여부, 키 교체 정책 등 언급 없음
   - MVP 수준에서는 적절할 수 있으나, 프로덕션 전환 시 고려사항 명시 필요

**명확성 문제:**

5. **"탐색 목적"의 모호함**
   - "탐색 목적의 랜딩페이지"라는 표현이 불명확
   - 시장 테스트인지, 학습용 프로젝트인지, 실제 판매 의도인지 명확히 할 필요

6. **테스트 전략 구체성 부족**
   - "Outside-In TDD"를 강조하지만 구체적인 테스트 케이스 예시 없음
   - Mock 전략, PayPal API 테스트 방법 등 상세 가이드 부족 (별도 문서 참조라고 하지만)

---

## 요약

**문서 1 (v2)이 문서 2 (v1)의 치명적 결함들을 대부분 수정했으나, 여전히 통화 단위 표기의 일관성 문제와 일부 정책의 불완전성이 남아있습니다.**
