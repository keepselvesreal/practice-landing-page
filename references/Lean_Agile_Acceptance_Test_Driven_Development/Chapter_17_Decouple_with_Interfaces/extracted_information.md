# Chapter 17: Decouple with Interfaces - 추출된 정보

## 핵심 내용
- 서비스 제공자와 독립적인 API를 정의해 구현 교체 시 코드·테스트 변경을 최소화
- 요청자가 인터페이스 사양과 인수 테스트를 준비하여 내부/외부 공급자가 동일 기준을 따르도록 함
- 기능 정확도뿐 아니라 성능·완전성 등 품질 속성도 명시적으로 테스트
- 다중 구현 비교, 테스트 더블 활용 등을 통해 신뢰성과 반복 가능성을 확보

## 상세 핵심 내용

### API 중심 계약
- `ZipCodeLookup` 인터페이스를 정의하고 예외 처리, 데이터 구조(`ZipCode`, `StateID`)까지 명시
- 서비스 제공자가 누구든 동일 인터페이스를 구현하도록 강제해 교체 비용을 줄임

### 인수 테스트 설계
- 주소 입력에 따른 우편번호 결과를 테이블로 정의, NotFound 등 오류 케이스 포함
- 테스트 더블을 통해 최소 데이터셋으로 빠른 단위 테스트 지원
- 필요한 데이터 타입(주/준주 약어 등)을 별도 표로 정의해 테스트 재사용성 향상

### 품질 기준
- 응답 시간 한계, 데이터 정확도·완전성 목표 등 비기능 요구를 테스트 테이블로 명문화
- 공급자가 성능 SLA를 충족하는지 검증 가능하도록 측정값을 포함

### 구현 비교 전략
- 두 구현의 결과를 변수에 저장/재사용하여 상호 비교(oracle 생성) 테스트 설계
- 기존 시스템과 신규 시스템의 외부 행위가 일치하는지 확인해 리그레션 위험 감소

## 주요 화제

### 서비스 추상화
- API 계층을 두어 외부 서비스, 상용 솔루션, 내부 구현 간 결합도를 낮춤

### 테스트 더블 재활용
- 외부 서비스 부재 시 자체 테스트 더블을 작성하여 개발/테스트 속도를 높임

### 성능 SLA 명문화
- 비즈니스 영향이 큰 응답 시간 목표를 인수 테스트에 포함해 공급자와 명확히 합의

## 부차 화제

### 데이터 품질 모니터링
- 완전성·정확도 목표를 설정하고 다중 구현 교차 검증으로 품질 감시

### 인터페이스 확장성
- 추가 기능(역 조회 등)이 필요하면 인터페이스에 메서드를 확장하고 동일 테스트 패턴 적용
