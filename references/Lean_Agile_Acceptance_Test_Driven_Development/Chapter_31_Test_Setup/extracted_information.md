# Chapter 31: Test Setup - 추출된 정보

## 핵심 내용
- 공통 셋업과 개별 셋업 사이의 트레이드오프를 다루며, 테스트 안정성과 유지보수성을 높이는 기법을 제시
- 공유 데이터 변경에 따른 리스크, 테스트 순서 의존성, 영속 저장소 상태 관리 방법을 논의
- 변수화, 그룹별 셋업, 상대적 검증 등으로 중복을 줄이면서도 테스트 독립성을 유지

## 상세 핵심 내용

### 공통 셋업 장단점
- 중복을 줄이지만 변경 시 다수 테스트 실패 위험; 공유 셋업은 가급적 불변 유지
- 대량 트랜잭션이 필요한 경우(대여 기록 등)에는 테스트별 맞춤 셋업이 더 안전

### 리스크 완화 기법
- 기존 데이터 수정 금지, 새로운 엔터티 추가 시 명시적 네이밍(예: Customer_Who_Reached_Limit)
- 변수/상수로 공통 값을 정의해 변경 영향 범위를 한곳에 집중(JAMES_CREDIT_CARD 등)
- 테스트 그룹별 공통 셋업, 상대적 결과 검증 등으로 의존도 최소화

### 테스트 순서와 영속 스토리지
- 테스트는 가능한 독립적으로 실행하되, 필요한 경우 보완 관계(추가 후 삭제)로 부작용 상쇄
- 실행 순서 의존 시 유지보수 부담 커지고 재현성 저하; 가능한 한 피하거나 문서화
- 영속 스토리지 정리, 트랜잭션 롤백, 고아 데이터 클리닝 등 후처리 중요

## 주요 화제

### 테스트 아키텍처 설계
- 테스트 코드도 설계 대상이며, DRY 원칙과 Prefactoring 개념 적용 권장

### 피드백 속도 vs 견고성
- 공통 셋업은 빠르지만 취약, 개별 셋업은 안정적이지만 중복 증가; 상황에 맞는 균형 필요

## 부차 화제

### 상대 검증 활용
- 상태 수를 미리 계산하기보다 변화량 비교 방식으로 테스트를 견고하게 만드는 방법 소개

### 테스트 환경 정리 도구
- 테스트 실행 후 데이터를 정리하거나 초기화하는 자동화 스크립트 필요성 언급
