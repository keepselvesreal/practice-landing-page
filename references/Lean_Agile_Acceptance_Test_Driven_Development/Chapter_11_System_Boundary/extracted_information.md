# Chapter 11: System Boundary - 추출된 정보

## 핵심 내용
- 신용카드 프로세서 및 은행과의 외부 인터페이스를 테스트 가능한 시나리오로 정의
- 카드 청구 흐름을 데이터 비교 테스트(시스템→프로세서, 프로세서→은행)로 검증
- 컴포넌트 테스트와 비즈니스 의사결정 포인트(거절 사유별 대응, 네트워크 장애 처리)를 명확화
- 테스트 더블/모크 개념을 소개하고 외부 의존성 제어를 통해 반복 가능한 테스트 환경을 구축
- 스토리 맵으로 워크플로우 구성 요소를 시각화해 릴리스 가능한 최소 기능을 식별

## 상세 핵심 내용

### 외부 인터페이스 인수 테스트
- 시스템이 보낸 청구 목록과 프로세서 보고서를 비교하여 누락·불일치를 확인
- 프로세서가 은행에 이체한 금액이 처리 수수료를 제외하고 예상 값과 일치하는지 확인
- 체크인 스토리와 연계해 요금 계산 후 즉시 청구가 생성되는지 검증

### 컴포넌트 및 비즈니스 규칙
- 유효/무효 카드에 대한 컴포넌트 테스트로 프로토콜 준수 및 응답 처리 확인
- 거절 사유(카드 없음, 은행 문의, 만료 등)에 따라 필요한 사용자 메시지·운영 절차 결정
- 네트워크 중단 시 처리 지연을 허용할지, 큐잉 전략과 날짜 차이 허용 여부 등 비즈니스 합의 도출

### 테스트 더블 활용
- 프로세서에서 제공하는 테스트 엔드포인트를 사용해 다양한 응답을 유도
- 자체 테스트 더블을 작성해야 하는 상황과 장점을 설명(속도, 제어 가능성, 반복성)
- 동시 이벤트/시간 제어 등 외부 요인을 시뮬레이션하기 위한 시퀀스 생성 예시 제공

## 상세 내용

### 데이터 표현과 비교 자동화
- 카드 청구/이체 데이터를 표로 수집해 수동 검증 또는 자동 비교 기능 추가 여부 논의
- 트랜잭션 ID 등 추가 필드가 테스트·운영에 도움이 되는지 검토

### 테스트 계층화
- 스토리 인수 테스트 → 컴포넌트 테스트 → 단위 테스트 순으로 책임 분리
- UI 없이 미들티어에서 테스트를 실행해 규칙 검증을 빠르게 반복

### 스토리 맵과 워크플로우
- 체크인부터 보고서 조회까지의 활동을 맵으로 조직해 최소 유용 제품(MVP) 범위를 정의
- 우선순위 높은 스토리(요금 계산·청구 제출·보고서 조회)를 선행 구현하도록 안내

## 주요 화제

### 운영 vs 자동화 판단
- 수동 대조(은행/프로세서 비교)를 계속 수행할지, 자동화를 추가할지 비용 대비 가치 평가

### 보안/사기 대응 고려
- 거절 사유에 따라 보안 조치(예: 은행 문의 시 카메라 주시, 경찰 호출 메시지) 등 운영 절차 설정

### 외부 의존성 관리
- 외부 시스템 규격 변화에 대비해 테스트가 빠르게 적응할 수 있도록 설계 제언

## 부차 화제

### 시간·이벤트 제어
- 생산 환경의 무작위 이벤트를 테스트 환경에서 재현하기 위해 시간/이벤트 드라이버를 사용하는 방법 설명

### 테스트 데이터 민감도
- 실제 카드 정보를 사용하지 않도록 테스트 번호를 활용하고, 필수 실거래 검증은 제한적으로 수행
