# 2장: 명세 기반 테스트 - 추출된 정보

## 핵심 내용
- 요구사항을 체계적으로 해부해 입력·출력·비즈니스 규칙을 식별하고 테스트 설계를 시작한다.
- 동등 분할, 경계 분석, 조합 전략을 활용해 명세에서 파생되는 입력 공간을 포괄한다.
- 파라미터화된 테스트 등 재사용 가능한 도구로 설계한 시나리오를 자동화한다.
- 실제 사례(문자열 파싱, 리스트 기반 덧셈)에서 명세 기반 접근이 숨은 결함을 드러낸다.
- 명세 기반 절차는 반복적·진화적으로 적용하며 경험과 직관으로 보완해야 한다.

## 상세 핵심 내용

### 요구사항 분해와 모델링
- 명세에는 동작, 입력, 출력 정보가 내재되어 있으며 이를 구조적으로 발굴해야 한다.
- 문자열에서 태그 사이 값을 추출하는 `substringsBetween` 요구사항을 사례로 입력(문자열, 태그)과 출력(배열) 정의를 명시화한다.
- 명세 해석 과정에서 예외 조건(null, 빈 문자열), 반환 규칙, 예제 시나리오를 정리해 테스트 토대를 마련한다.

### 7단계 명세 기반 절차
- (1) 요구·입출력 이해 → (2) 탐색적 실행으로 동작 감 잡기 → (3) 입력·출력 분할 정의 → (4) 제약·조합 식별 → (5) 경계·대표값 선정 → (6) 테스트를 자동화 코드로 변환 → (7) 경험 기반 보강.
- 카테고리-파티션 기법과 Domain Testing Workbook의 접근을 통합해 일관된 체계 제공.
- 변수 상호 제약과 상태 간 전의·교차 조건까지 고려해 누락 없는 분할을 추구한다.

### 경계와 조합 다루기
- 경계 조건은 결함이 집중되는 지점이므로 최소·최대 길이, 0/1/다수 요소 등 필수 확인.
- 입력 변수 조합 시 폭발을 막기 위해 위험 기반 선택, pairwise, 대표 조합 전략 사용.
- 특수 문자, 중첩 태그, 서로 다른 길이의 태그 등 변형 사례로 명세 범위를 넓힌다.

### 자동화와 가독성
- JUnit `@ParameterizedTest`, `@MethodSource`를 활용해 다수 시나리오를 한 테스트로 실행.
- 헬퍼 함수, 공통 설정을 사용해 테스트 중복을 줄이고 실패 시나리오 식별성을 높인다.
- 명세 기반 테스트가 구조적 테스트와 이어질 수 있도록 코드 재사용성과 명확한 네이밍을 유지한다.

### 실전 버그 탐지 사례
- 리스트 기반 덧셈 구현에서 캐리 처리 누락, 선행 0 제거 미비 등 “코드 부족” 유형 결함을 포착했다.
- 명세에서 파생한 테스트 스위트가 다수 실패를 유발하며 결함 위치를 정확히 지목했다.
- 예외 케이스(숫자 범위를 벗어난 입력)도 명세 근거로 포함시켜 방어적 계약을 검증했다.

### 현실 적용 팁
- 절차는 순차가 아닌 반복적이며, 테스트 중 발견한 통찰로 분할·경계를 재조정해야 한다.
- 도메인 지식, 팀 히스토리, 로그 등 외부 정보와 결합해 명세 해석의 정확도를 높인다.
- 문서화는 테스트 코드, 체크리스트, 가벼운 테이블 등 상황에 맞춰 유지하며, 유지 비용을 고려한다.

## 상세 내용

### `substringsBetween` 명세 사례
- 입력이 null이거나 태그가 비어 있으면 null 반환, 빈 입력은 빈 배열 등 반환 규칙을 명확화.
- 단일/다중 태그, 서로 다른 길이 조합, 겹치는 태그, 중첩 가능성 등 다양한 분할을 정의했다.
- 테스트 케이스 23개를 도출해 예외·정상 흐름을 모두 커버하고, 파라미터화 테스트로 자동화.

### `add(List<Integer>, List<Integer>)` 버그 사냥
- 입력 리스트의 null/빈/단일/복수/선행 0 등 분할을 정의하고 길이 차, 캐리 다양성을 조합.
- 명세상 허용되지 않는 자릿값(0~9 외)을 예외 테스트로 처리해 계약 위반을 빠르게 포착.
- 실패 보고서를 통해 캐리 누락, 선행 0 제거 필요성을 발견하고 코드 보완.

### 명세 기반과 창의성의 균형
- 체계적 절차로 일반 케이스를 확보한 뒤, 리뷰어 피드백·직관에서 나오는 추가 시나리오를 수용.
- 팀 기반 리뷰, 페어 테스팅 등으로 관점 다양성을 확보해 누락을 줄인다.

### 명세 기반 테스트의 한계와 연결고리
- 명세가 모호하거나 부실할 경우 질문과 실험을 통해 모델을 보완해야 한다.
- 명세 기반으로 확인한 후 구조 기반(코드 커버리지) 테스트로 보강하는 순차적·반복적 루프를 제안한다.

## 주요 화제

### 1. 명세 해석 기법
- 입력·출력·규칙 분해, 동등 분할, 주제별 파티션 정의 방법 상세 소개.

### 2. 경계·조합 전략
- 경계 값 분석, 전이 상태, 변수 간 상호 제약 처리, 조합 폭발 완화 전략.

### 3. 자동화 패턴
- 파라미터화 테스트, 헬퍼 함수, 테스트 데이터 공급 구조 등 구현 기법.

### 4. 버그 탐색 사례 연구
- 실무 코드·오픈소스 예제를 토대로 명세 기반 접근 효과 입증.

## 부차 화제

### 1. 테스트 데이터 관리
- 테스트 케이스 테이블 작성, 케이스 식별자(T1~T21) 관리로 추적성 확보.

### 2. 문서화와 커뮤니케이션
- 명세 기반 테스트 결과를 문서나 코드 주석에 남기는 실천 방법.

### 3. 도메인 지식 축적
- 이전 장애, 로그, 사용자 피드백 등을 명세 해석에 반영해 결함 탐지력을 높인다.

### 4. 경험 기반 체크
- 절차가 놓친 영역을 감으로 찾아내는 검증 단계의 필요성과 팀 리뷰 권장.

### 5. 학습 자료 및 참고 문헌
- Ostrand & Balcer, Kaner et al. 등 명세 기반 테스트를 뒷받침하는 고전 연구 인용.
